# éƒ¨ç½²æ£€æŸ¥æ¸…å•

## âœ… å·²å®Œæˆ

1. âœ… **ç¯å¢ƒå˜é‡å·²é…ç½®**ï¼ˆåœ¨ Vercel Dashboard ä¸­ï¼‰
   - `GMAIL_USER`: nbs0320@gmail.com
   - `GMAIL_APP_PASSWORD`: laexwfcolhbefydo
   - `CONTACT_EMAIL`: nbs0320@gmail.com

2. âœ… **ä»£ç å·²å‡†å¤‡**
   - `mail-service/api/send.js` - é‚®ä»¶å‘é€ç«¯ç‚¹
   - `mail-service/api/health.js` - å¥åº·æ£€æŸ¥ç«¯ç‚¹
   - `mail-service/vercel.json` - Vercel é…ç½®
   - `api/src/index.ts` - å·²æ›´æ–°è°ƒç”¨é‚®ä»¶æœåŠ¡

## ğŸ“‹ éƒ¨ç½²æ­¥éª¤

### 1. æäº¤ä»£ç åˆ° Git

```bash
# æ£€æŸ¥æ–‡ä»¶çŠ¶æ€
git status

# æ·»åŠ æ‰€æœ‰æ›´æ”¹
git add mail-service/
git add api/src/index.ts
git add *.md

# æäº¤
git commit -m "Add Gmail SMTP mail service with app password"

# æ¨é€åˆ°è¿œç¨‹ä»“åº“
git push
```

### 2. åœ¨ Vercel ä¸­é…ç½®é¡¹ç›®ï¼ˆå¦‚æœè¿˜æ²¡æœ‰ï¼‰

#### é€‰é¡¹ A: å°† mail-service ä½œä¸ºç‹¬ç«‹é¡¹ç›®

1. Vercel Dashboard â†’ Add New Project
2. é€‰æ‹©æ‚¨çš„ Git ä»“åº“
3. **Root Directory**: è®¾ç½®ä¸º `mail-service`
4. Framework Preset: Other
5. ç¯å¢ƒå˜é‡å·²åœ¨ Dashboard ä¸­é…ç½® âœ…
6. ç‚¹å‡» Deploy

#### é€‰é¡¹ B: åœ¨ä¸»é¡¹ç›®ä¸­éƒ¨ç½²

å¦‚æœæ‚¨çš„ Vercel é¡¹ç›®æ ¹ç›®å½•æ˜¯æ•´ä¸ªä»“åº“ï¼š

1. Vercel ä¼šè‡ªåŠ¨æ£€æµ‹ `mail-service/api/` ä¸­çš„ Serverless Functions
2. ç¡®ä¿ç¯å¢ƒå˜é‡å·²é…ç½® âœ…
3. `git push` åè‡ªåŠ¨éƒ¨ç½²

### 3. è·å–é‚®ä»¶æœåŠ¡ URL

éƒ¨ç½²å®Œæˆåï¼Œåœ¨ Vercel Dashboard ä¸­ï¼š
- é¡¹ç›® â†’ Domains
- å¤åˆ¶éƒ¨ç½² URLï¼Œä¾‹å¦‚ï¼š`https://your-project.vercel.app`

### 4. é…ç½® Cloudflare Workers

```bash
cd api

# è®¾ç½®é‚®ä»¶æœåŠ¡ URL
wrangler secret put MAIL_SERVICE_URL
# è¾“å…¥: https://your-mail-service-url.vercel.app

# éƒ¨ç½² Workers
wrangler deploy
```

### 5. æµ‹è¯•

#### æµ‹è¯•é‚®ä»¶æœåŠ¡
```bash
curl https://your-mail-service-url.vercel.app/api/health
```

åº”è¯¥è¿”å›ï¼š
```json
{"status":"ok","service":"gmail-mail-service"}
```

#### æµ‹è¯•è”ç³»è¡¨å•
1. è®¿é—®è”ç³»è¡¨å•é¡µé¢
2. å¡«å†™è¡¨å•å¹¶æäº¤
3. æ£€æŸ¥é‚®ç®± `nbs0320@gmail.com` æ˜¯å¦æ”¶åˆ°é‚®ä»¶

## ğŸ” éªŒè¯æ¸…å•

- [ ] ä»£ç å·²æ¨é€åˆ° Git
- [ ] Vercel é¡¹ç›®å·²åˆ›å»º/é…ç½®
- [ ] ç¯å¢ƒå˜é‡å·²è®¾ç½®ï¼ˆGMAIL_USER, GMAIL_APP_PASSWORD, CONTACT_EMAILï¼‰
- [ ] Vercel éƒ¨ç½²æˆåŠŸ
- [ ] é‚®ä»¶æœåŠ¡å¥åº·æ£€æŸ¥é€šè¿‡
- [ ] Cloudflare Workers å·²é…ç½® MAIL_SERVICE_URL
- [ ] Cloudflare Workers å·²éƒ¨ç½²
- [ ] è”ç³»è¡¨å•æµ‹è¯•æˆåŠŸ
- [ ] æ”¶åˆ°æµ‹è¯•é‚®ä»¶

## ğŸ› æ•…éšœæ’é™¤

### éƒ¨ç½²å¤±è´¥

1. **æ£€æŸ¥ Vercel æ„å»ºæ—¥å¿—**
   - Dashboard â†’ Deployments â†’ é€‰æ‹©å¤±è´¥çš„éƒ¨ç½² â†’ Build Logs

2. **æ£€æŸ¥ç¯å¢ƒå˜é‡**
   - Settings â†’ Environment Variables
   - ç¡®ä¿æ‰€æœ‰å˜é‡éƒ½å·²è®¾ç½®

3. **æ£€æŸ¥ä»£ç **
   ```bash
   cd mail-service
   npm install
   node api/send.js  # æ£€æŸ¥è¯­æ³•é”™è¯¯
   ```

### é‚®ä»¶å‘é€å¤±è´¥

1. **æ£€æŸ¥é‚®ä»¶æœåŠ¡æ—¥å¿—**
   - Vercel Dashboard â†’ Functions â†’ Logs

2. **æ£€æŸ¥åº”ç”¨å¯†é’¥**
   - ç¡®ä¿æ ¼å¼æ­£ç¡®ï¼ˆ16ä½ï¼Œæ— ç©ºæ ¼ï¼‰
   - ç¡®ä¿å·²å¯ç”¨ä¸¤æ­¥éªŒè¯

3. **æµ‹è¯•é‚®ä»¶æœåŠ¡**
   ```bash
   curl -X POST https://your-url.vercel.app/api/send \
     -H "Content-Type: application/json" \
     -d '{
       "to": "nbs0320@gmail.com",
       "subject": "Test",
       "text": "Test message"
     }'
   ```

### Cloudflare Workers æ— æ³•è¿æ¥é‚®ä»¶æœåŠ¡

1. **æ£€æŸ¥ MAIL_SERVICE_URL**
   ```bash
   wrangler secret list
   ```

2. **æµ‹è¯•é‚®ä»¶æœåŠ¡å¯è®¿é—®æ€§**
   ```bash
   curl https://your-mail-service-url.vercel.app/api/health
   ```

3. **æ£€æŸ¥ CORS è®¾ç½®**
   - ç¡®ä¿é‚®ä»¶æœåŠ¡è®¾ç½®äº†æ­£ç¡®çš„ CORS å¤´

## ğŸ“ é‡è¦æç¤º

1. **åº”ç”¨å¯†é’¥å®‰å…¨**
   - âœ… å·²é…ç½®åœ¨ Vercel ç¯å¢ƒå˜é‡ä¸­ï¼ˆå®‰å…¨ï¼‰
   - âŒ ä¸è¦æäº¤åˆ° Git
   - âœ… `.gitignore` å·²åŒ…å« `.env`

2. **æ¯æ¬¡ git push å**
   - Vercel ä¼šè‡ªåŠ¨é‡æ–°éƒ¨ç½²
   - æ— éœ€æ‰‹åŠ¨æ“ä½œ

3. **æ›´æ–°ç¯å¢ƒå˜é‡å**
   - éœ€è¦é‡æ–°éƒ¨ç½²æ‰èƒ½ç”Ÿæ•ˆ
   - æˆ–è€…åœ¨ Vercel Dashboard ä¸­ç‚¹å‡» "Redeploy"

## å®Œæˆï¼

ç°åœ¨æ‚¨å¯ä»¥ï¼š
1. `git push` ä»£ç 
2. Vercel è‡ªåŠ¨éƒ¨ç½²
3. è”ç³»è¡¨å•è‡ªåŠ¨ä½¿ç”¨ Gmail åº”ç”¨å¯†é’¥å‘é€é‚®ä»¶

æ— éœ€ä»»ä½•ç¬¬ä¸‰æ–¹æœåŠ¡ï¼ğŸ‰
